<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Creating a Lua Mod - UE4SS Documentation</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../css/custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Home</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> FeatureOverview</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../feature-overview/blueprint-modloader.html"><strong aria-hidden="true">1.1.</strong> Blueprint Modloading</a></li><li class="chapter-item "><a href="../feature-overview/live-view.html"><strong aria-hidden="true">1.2.</strong> Live Property Viewer and Editor</a></li><li class="chapter-item "><a href="../feature-overview/dumpers.html"><strong aria-hidden="true">1.3.</strong> Dumpers</a></li><li class="chapter-item "><a href="../feature-overview/universal-mods.html"><strong aria-hidden="true">1.4.</strong> Universal UE Mods</a></li><li class="chapter-item "><a href="../feature-overview/experimental.html"><strong aria-hidden="true">1.5.</strong> Experimental</a></li></ol></li><li class="chapter-item expanded "><a href="../installation-guide.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../custom-game-configs.html"><strong aria-hidden="true">3.</strong> Custom Game Configs</a></li><li class="chapter-item expanded "><a href="../lua-api.html"><strong aria-hidden="true">4.</strong> Lua API</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div><strong aria-hidden="true">4.1.</strong> Table Definitions</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../lua-api/table-definitions/key.html"><strong aria-hidden="true">4.1.1.</strong> Key</a></li><li class="chapter-item "><a href="../lua-api/table-definitions/modifierkey.html"><strong aria-hidden="true">4.1.2.</strong> ModifierKey</a></li><li class="chapter-item "><a href="../lua-api/table-definitions/propertytypes.html"><strong aria-hidden="true">4.1.3.</strong> PropertyTypes</a></li><li class="chapter-item "><a href="../lua-api/table-definitions/offsetinternalinfo.html"><strong aria-hidden="true">4.1.4.</strong> OffsetInternalInfo</a></li><li class="chapter-item "><a href="../lua-api/table-definitions/arraypropertyinfo.html"><strong aria-hidden="true">4.1.5.</strong> ArrayPropertyInfo</a></li><li class="chapter-item "><a href="../lua-api/table-definitions/custompropertyinfo.html"><strong aria-hidden="true">4.1.6.</strong> CustomPropertyInfo</a></li><li class="chapter-item "><a href="../lua-api/table-definitions/eobjectflags.html"><strong aria-hidden="true">4.1.7.</strong> EObjectFlags</a></li><li class="chapter-item "><a href="../lua-api/table-definitions/einternalobjectflags.html"><strong aria-hidden="true">4.1.8.</strong> EInternalObjectFlags</a></li><li class="chapter-item "><a href="../lua-api/table-definitions/efindname.html"><strong aria-hidden="true">4.1.9.</strong> EFindName</a></li></ol></li><li class="chapter-item "><div><strong aria-hidden="true">4.2.</strong> Classes</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../lua-api/classes/remoteobject.html"><strong aria-hidden="true">4.2.1.</strong> RemoteObject</a></li><li class="chapter-item "><a href="../lua-api/classes/localobject.html"><strong aria-hidden="true">4.2.2.</strong> LocalObject</a></li><li class="chapter-item "><a href="../lua-api/classes/unrealversion.html"><strong aria-hidden="true">4.2.3.</strong> UnrealVersion</a></li><li class="chapter-item "><a href="../lua-api/classes/ue4ss.html"><strong aria-hidden="true">4.2.4.</strong> UE4SS</a></li><li class="chapter-item "><a href="../lua-api/classes/mod.html"><strong aria-hidden="true">4.2.5.</strong> Mod</a></li><li class="chapter-item "><a href="../lua-api/classes/uobject.html"><strong aria-hidden="true">4.2.6.</strong> UObject</a></li><li class="chapter-item "><a href="../lua-api/classes/ustruct.html"><strong aria-hidden="true">4.2.7.</strong> UStruct</a></li><li class="chapter-item "><a href="../lua-api/classes/uscriptstruct.html"><strong aria-hidden="true">4.2.8.</strong> UScriptStruct</a></li><li class="chapter-item "><a href="../lua-api/classes/uclass.html"><strong aria-hidden="true">4.2.9.</strong> UClass</a></li><li class="chapter-item "><a href="../lua-api/classes/ufunction.html"><strong aria-hidden="true">4.2.10.</strong> UFunction</a></li><li class="chapter-item "><a href="../lua-api/classes/uenum.html"><strong aria-hidden="true">4.2.11.</strong> UEnum</a></li><li class="chapter-item "><a href="../lua-api/classes/aactor.html"><strong aria-hidden="true">4.2.12.</strong> AActor</a></li><li class="chapter-item "><a href="../lua-api/classes/fstring.html"><strong aria-hidden="true">4.2.13.</strong> FString</a></li><li class="chapter-item "><a href="../lua-api/classes/fname.html"><strong aria-hidden="true">4.2.14.</strong> FName</a></li><li class="chapter-item "><a href="../lua-api/classes/ftext.html"><strong aria-hidden="true">4.2.15.</strong> FText</a></li><li class="chapter-item "><a href="../lua-api/classes/fieldclass.html"><strong aria-hidden="true">4.2.16.</strong> FieldClass</a></li><li class="chapter-item "><a href="../lua-api/classes/tarray.html"><strong aria-hidden="true">4.2.17.</strong> TArray</a></li><li class="chapter-item "><a href="../lua-api/classes/remoteunrealparam.html"><strong aria-hidden="true">4.2.18.</strong> RemoteUnrealParam</a></li><li class="chapter-item "><a href="../lua-api/classes/localunrealparam.html"><strong aria-hidden="true">4.2.19.</strong> LocalUnrealParam</a></li><li class="chapter-item "><a href="../lua-api/classes/property.html"><strong aria-hidden="true">4.2.20.</strong> Property</a></li><li class="chapter-item "><a href="../lua-api/classes/objectproperty.html"><strong aria-hidden="true">4.2.21.</strong> ObjectProperty</a></li><li class="chapter-item "><a href="../lua-api/classes/structproperty.html"><strong aria-hidden="true">4.2.22.</strong> StructProperty</a></li><li class="chapter-item "><a href="../lua-api/classes/boolproperty.html"><strong aria-hidden="true">4.2.23.</strong> BoolProperty</a></li><li class="chapter-item "><a href="../lua-api/classes/arrayproperty.html"><strong aria-hidden="true">4.2.24.</strong> ArrayProperty</a></li><li class="chapter-item "><a href="../lua-api/classes/uobjectreflection.html"><strong aria-hidden="true">4.2.25.</strong> UObjectReflection</a></li><li class="chapter-item "><a href="../lua-api/classes/foutputdevice.html"><strong aria-hidden="true">4.2.26.</strong> FOutputDevice</a></li><li class="chapter-item "><a href="../lua-api/classes/fweakobjectptr.html"><strong aria-hidden="true">4.2.27.</strong> FWeakObjectPtr</a></li></ol></li><li class="chapter-item "><div><strong aria-hidden="true">4.3.</strong> Global Functions</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../lua-api/global-functions/print.html"><strong aria-hidden="true">4.3.1.</strong> print</a></li><li class="chapter-item "><a href="../lua-api/global-functions/fname.html"><strong aria-hidden="true">4.3.2.</strong> FName</a></li><li class="chapter-item "><a href="../lua-api/global-functions/ftext.html"><strong aria-hidden="true">4.3.3.</strong> FText</a></li><li class="chapter-item "><a href="../lua-api/global-functions/iterategamedirectories.html"><strong aria-hidden="true">4.3.4.</strong> IterateGameDirectories</a></li><li class="chapter-item "><a href="../lua-api/global-functions/findobject.html"><strong aria-hidden="true">4.3.5.</strong> FindObject</a></li><li class="chapter-item "><a href="../lua-api/global-functions/findobjects.html"><strong aria-hidden="true">4.3.6.</strong> FindObjects</a></li><li class="chapter-item "><a href="../lua-api/global-functions/staticfindobject.html"><strong aria-hidden="true">4.3.7.</strong> StaticFindObject</a></li><li class="chapter-item "><a href="../lua-api/global-functions/findfirstof.html"><strong aria-hidden="true">4.3.8.</strong> FindFirstOf</a></li><li class="chapter-item "><a href="../lua-api/global-functions/findallof.html"><strong aria-hidden="true">4.3.9.</strong> FindAllOf</a></li><li class="chapter-item "><a href="../lua-api/global-functions/staticconstructobject.html"><strong aria-hidden="true">4.3.10.</strong> StaticConstructObject</a></li><li class="chapter-item "><a href="../lua-api/global-functions/foreachuobject.html"><strong aria-hidden="true">4.3.11.</strong> ForEachUObject</a></li><li class="chapter-item "><a href="../lua-api/global-functions/notifyonnewobject.html"><strong aria-hidden="true">4.3.12.</strong> NotifyOnNewObject</a></li><li class="chapter-item "><a href="../lua-api/global-functions/executewithdelay.html"><strong aria-hidden="true">4.3.13.</strong> ExecuteWithDelay</a></li><li class="chapter-item "><a href="../lua-api/global-functions/executeingamethread.html"><strong aria-hidden="true">4.3.14.</strong> ExecuteInGameThread</a></li><li class="chapter-item "><a href="../lua-api/global-functions/executeasync.html"><strong aria-hidden="true">4.3.15.</strong> ExecuteAsync</a></li><li class="chapter-item "><a href="../lua-api/global-functions/loopasync.html"><strong aria-hidden="true">4.3.16.</strong> LoopAsync</a></li><li class="chapter-item "><a href="../lua-api/global-functions/loadasset.html"><strong aria-hidden="true">4.3.17.</strong> LoadAsset</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerkeybind.html"><strong aria-hidden="true">4.3.18.</strong> RegisterKeyBind</a></li><li class="chapter-item "><a href="../lua-api/global-functions/iskeybindregistered.html"><strong aria-hidden="true">4.3.19.</strong> IsKeyBindRegistered</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerhook.html"><strong aria-hidden="true">4.3.20.</strong> RegisterHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/unregisterhook.html"><strong aria-hidden="true">4.3.21.</strong> UnregisterHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registercustomproperty.html"><strong aria-hidden="true">4.3.22.</strong> RegisterCustomProperty</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registercustomevent.html"><strong aria-hidden="true">4.3.23.</strong> RegisterCustomEvent</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerinitgamestateprehook.html"><strong aria-hidden="true">4.3.24.</strong> RegisterInitGameStatePreHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerinitgamestateposthook.html"><strong aria-hidden="true">4.3.25.</strong> RegisterInitGameStatePostHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerbeginplayprehook.html"><strong aria-hidden="true">4.3.26.</strong> RegisterBeginPlayPreHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerbeginplayposthook.html"><strong aria-hidden="true">4.3.27.</strong> RegisterBeginPlayPostHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerprocessconsoleexecprehook.html"><strong aria-hidden="true">4.3.28.</strong> RegisterProcessConsoleExecPreHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerprocessconsoleexecposthook.html"><strong aria-hidden="true">4.3.29.</strong> RegisterProcessConsoleExecPostHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registercallfunctionbynamewithargumentsprehook.html"><strong aria-hidden="true">4.3.30.</strong> RegisterCallFunctionByNameWithArgumentsPreHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registercallfunctionbynamewithargumentsposthook.html"><strong aria-hidden="true">4.3.31.</strong> RegisterCallFunctionByNameWithArgumentsPostHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerulocalplayerexecprehook.html"><strong aria-hidden="true">4.3.32.</strong> RegisterULocalPlayerExecPreHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerulocalplayerexecposthook.html"><strong aria-hidden="true">4.3.33.</strong> RegisterULocalPlayerExecPostHook</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerconsolecommandhandler.html"><strong aria-hidden="true">4.3.34.</strong> RegisterConsoleCommandHandler</a></li><li class="chapter-item "><a href="../lua-api/global-functions/registerconsolecommandglobalhandler.html"><strong aria-hidden="true">4.3.35.</strong> RegisterConsoleCommandGlobalHandler</a></li></ol></li><li class="chapter-item "><a href="../lua-api/examples.html"><strong aria-hidden="true">4.4.</strong> Examples</a></li><li class="chapter-item "><a href="../guides/creating-a-lua-mod.html" class="active"><strong aria-hidden="true">4.5.</strong> Creating a Lua Mod</a></li><li class="chapter-item "><a href="../guides/using-custom-lua-bindings.html"><strong aria-hidden="true">4.6.</strong> Using Custom Lua Bindings</a></li></ol></li><li class="chapter-item expanded "><a href="../cpp-api.html"><strong aria-hidden="true">5.</strong> C++ API</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../cpp-api/bp-macros.html"><strong aria-hidden="true">5.1.</strong> BP Macros</a></li><li class="chapter-item "><a href="../cpp-api/cpp-examples.html"><strong aria-hidden="true">5.2.</strong> C++ Examples</a></li><li class="chapter-item "><a href="../guides/creating-a-c++-mod.html"><strong aria-hidden="true">5.3.</strong> Creating a C++ Mod</a></li><li class="chapter-item "><a href="../guides/installing-a-c++-mod.html"><strong aria-hidden="true">5.4.</strong> Installing a C++ Mod</a></li><li class="chapter-item "><a href="../guides/creating-gui-tabs-with-c++-mod.html"><strong aria-hidden="true">5.5.</strong> GUI tabs with a C++ Mod</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Guides</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../guides/fixing-compatibility-problems.html"><strong aria-hidden="true">6.1.</strong> Fixing missing AOBs</a></li><li class="chapter-item "><a href="../guides/generating-uht-compatible-headers.html"><strong aria-hidden="true">6.2.</strong> Generating UHT headers</a></li><li class="chapter-item "><a href="../guides/creating-a-c++-mod.html"><strong aria-hidden="true">6.3.</strong> Creating a C++ Mod</a></li><li class="chapter-item "><a href="../guides/installing-a-c++-mod.html"><strong aria-hidden="true">6.4.</strong> Installing a C++ Mod</a></li><li class="chapter-item "><a href="../guides/creating-gui-tabs-with-c++-mod.html"><strong aria-hidden="true">6.5.</strong> GUI tabs with a C++ Mod</a></li><li class="chapter-item expanded "><a href="../guides/creating-a-lua-mod.html" class="active"><strong aria-hidden="true">6.6.</strong> Creating a Lua Mod</a></li><li class="chapter-item "><a href="../guides/using-custom-lua-bindings.html"><strong aria-hidden="true">6.7.</strong> Using Custom Lua Bindings</a></li></ol></li><li class="chapter-item expanded "><a href="../devlogs.html"><strong aria-hidden="true">7.</strong> Devlogs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../devlogs/datatables-in-ue4ss.html"><strong aria-hidden="true">7.1.</strong> DataTables in UE4SS</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">UE4SS Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="creating-a-lua-mod"><a class="header" href="#creating-a-lua-mod">Creating a Lua mod</a></h1>
<h2 id="before-you-start"><a class="header" href="#before-you-start">Before you start</a></h2>
<p>To create a Lua mod in UE4SS, you should first: </p>
<ul>
<li>know <a href="../installation-guide.html">how to install UE4SS</a> in your target game and make sure it is running OK;</li>
<li>be able to write basic Lua code (see the official book <a href="https://www.lua.org/pil/contents.html">Programming in Lua</a> and its later editions, or any other recommended tutorial online);</li>
<li>have an understanding of the object model of the Unreal Engine and the basics of game modding.</li>
</ul>
<h2 id="how-does-a-minimal-lua-mod-look-like"><a class="header" href="#how-does-a-minimal-lua-mod-look-like">How does a minimal Lua mod look like</a></h2>
<p>A Lua mod in UE4SS is a set of Lua scripts placed in a folder inside the <code>Mods/</code> folder of UE4SS installation. 
Let's call it <code>MyLuaMod</code> for the purpose of this example.</p>
<p>In order to be loaded and executed:</p>
<ol>
<li>The mod folder must have a <code>scripts</code> subfolder and a <code>main.lua</code> file inside, so it looks like:</li>
</ol>
<pre><code>Mods\
    ...
    MyLuaMod\
        scripts\
            main.lua
    ...
</code></pre>
<ol start="2">
<li>The <code>Mods\MyLuaMod\scripts\main.lua</code> file has some Lua code inside it, e.g.:</li>
</ol>
<pre><code class="language-lua">print(&quot;[MyLuaMod] Mod loaded\n&quot;)
</code></pre>
<ol start="3">
<li>The mod must be added and enabled in <code>Mods\mods.txt</code> with a new line containing the name of your mod folder (name of your mod) and <code>1</code> for enabling or <code>0</code> for disabling the mod:</li>
</ol>
<pre><code>...
MyLuaMod : 1
...
</code></pre>
<p>Your custom functionality goes inside <code>main.lua</code>, from which you can include other Lua files if needed, including creating your own Lua modules or importing various libraries.</p>
<h2 id="what-can-you-do-in-a-lua-mod"><a class="header" href="#what-can-you-do-in-a-lua-mod">What can you do in a Lua mod</a></h2>
<p>The API provided by UE4SS and available to you in Lua is documented in sub-sections of chapter <a href="../lua-api.html">&quot;Lua API&quot;</a> here. Using those functions and classes, you find and manipulate the instances of Unreal Engine objects in memory, creating new objects or modifying existing ones, calling their methods and accessing their fields.</p>
<p>Basically, you are doing the exact same thing that an Unreal Engine game developer does in their code, but using UE4SS to locate the necessary objects and guessing a bit, while the developers already knew where and what they are (because they have their source code).</p>
<h3 id="creating-simple-data-types"><a class="header" href="#creating-simple-data-types">Creating simple data types</a></h3>
<p>If you need to create an object of a structure-like class, e.g. <code>FVector</code>, in order to pass it into a Unreal Engine function, UE4SS allows you to pass a Lua table with the fields of the class like <code>{X=1.0, Y=2.0, Z=3.0}</code> instead.</p>
<h3 id="using-lua-c-libraries"><a class="header" href="#using-lua-c-libraries">Using Lua C libraries</a></h3>
<p>If you ever need to load Lua C libraries, that have native code (i.e. with DLLs on Windows), 
you can place these DLLs directly inside the same <code>\scripts\</code> folder.</p>
<h1 id="setting-up-a-lua-mod-development-environment"><a class="header" href="#setting-up-a-lua-mod-development-environment">Setting up a Lua mod development environment</a></h1>
<p>It is much easier to write mods if your code editor or IDE is properly configured for Lua development and knows about UE4SS API. </p>
<ol>
<li>
<p>Configure your code editor/IDE to support Lua syntax highlighting and code completion. If you use VSCode, see here in <a href="./using-custom-lua-bindings">Using Custom Lua Bindings</a>.</p>
</li>
<li>
<p>Make sure that your build of UE4SS contains <code>Mods\shared\Types.lua</code> (a development build from Github releases contains it). This will load the UE4SS API definitions in your IDE.</p>
</li>
<li>
<p>(Optional) <a href="./using-custom-lua-bindings.html#dumping-custom-lua-bindings">Dump the Lua Bindings</a> fromm UE4SS Gui console, and <a href="./using-custom-lua-bindings.html#to-use-bindings">follow the recommendations to load them</a> here.</p>
</li>
</ol>
<p>Then open the <code>Mods/</code> folder of your UE4SS installation in your IDE, and create or modify your mod inside it.</p>
<h1 id="applying-code-changes"><a class="header" href="#applying-code-changes">Applying code changes</a></h1>
<p>The main benefit of developing Lua mods is that you can quickly edit Lua sources without recompiling/rebuilding the C++ mod library as is always the case with C++ mods, and retry without restarting the game.</p>
<p>You can either:</p>
<ul>
<li>reload all mods from the UE4SS GUI Console with the &quot;Restart All Mods&quot; button on the &quot;Console&quot; tab, or,</li>
<li>enable &quot;Hot reload&quot; in <code>UE4SS-settings.ini</code> and use the assigned hotkey (<code>Ctrl+R</code> by default) to do the same.</li>
</ul>
<h1 id="your-first-mod"><a class="header" href="#your-first-mod">Your first mod</a></h1>
<p>In the <code>main.lua</code> file of your mod, write some code that will try to access the objects of Unreal Engine inside your target game and do something that you can observe in the UE4SS console.</p>
<p>You can start by trying just </p>
<pre><code class="language-lua">print(&quot;[MyLuaMod] Mod loaded\n&quot;)
</code></pre>
<p>and once you have verified that it runs OK, you can start implementing some actual functionality.</p>
<p>The example code below is fairly generic and should work for many games supported by UE4SS.</p>
<p>It registers a hotkey <code>Ctrl+F1</code> and when pressed, it reads the player coordinates 
and calculates how far the player has moved since the last time the hotkey was pressed. </p>
<blockquote>
<p>Note that the logging <code>print</code> calls include the name of the mod in square brackets, as it helps you
find your mod's output among other log strings in the console.</p>
</blockquote>
<p>The player coordinates are retrieved in the following way:</p>
<ol>
<li>Gets the <a href="https://docs.unrealengine.com/4.27/en-US/API/Runtime/Engine/GameFramework/APlayerController/">player controller</a> using <a href="https://github.com/UE4SS-RE/RE-UE4SS/blob/main/assets/Mods/shared/UEHelpers/UEHelpers.lua">UE4SS <code>UEHelpers</code> class</a>.</li>
<li>Get <a href="https://docs.unrealengine.com/4.27/en-US/API/Runtime/Engine/GameFramework/APawn/">the <code>Pawn</code></a>, which represents the actual &quot;physical&quot; entity that the player can control in Unreal Engine.</li>
<li>Call the appropriate Unreal Engine <a href="https://docs.unrealengine.com/4.27/en-US/API/Runtime/Engine/GameFramework/AActor/K2_GetActorLocation/">method <code>K2_GetActorLocation</code></a> that returns a <code>Pawn</code>'s location (by accessing its parent <code>Actor</code> class).</li>
<li>The location is a 3-component vector of Unreal Engine type <code>FVector</code>, having <code>X</code>, <code>Y</code> and <code>Z</code> as its fields.</li>
</ol>
<pre><code class="language-lua">local UEHelpers = require(&quot;UEHelpers&quot;)

print(&quot;[MyLuaMod] Mod loaded\n&quot;)

local lastLocation = nil

function ReadPlayerLocation()
    local FirstPlayerController = UEHelpers:GetPlayerController()
    local Pawn = FirstPlayerController.Pawn
    local Location = Pawn:K2_GetActorLocation()
    print(string.format(&quot;[MyLuaMod] Player location: {X=%.3f, Y=%.3f, Z=%.3f}\n&quot;, Location.X, Location.Y, Location.Z))
    if lastLocation then
        print(string.format(&quot;[MyLuaMod] Player moved: {delta_X=%.3f, delta_Y=%.3f, delta_Z=%.3f}\n&quot;,
            Location.X - lastLocation.X,
            Location.Y - lastLocation.Y,
            Location.Z - lastLocation.Z)
        )
    end
    lastLocation = Location
end

RegisterKeyBind(Key.F1, { ModifierKey.CONTROL }, function()
    print(&quot;[MyLuaMod] Key pressed\n&quot;)
    ExecuteInGameThread(function()
        ReadPlayerLocation()
    end)
end)

</code></pre>
<p>When you load the game until you can move the character, press the hotkey, move the player, press it again, the mod will generate a following output or something very similar:</p>
<pre><code>...
[2024-01-09 19:37:27] Starting Lua mod 'MyLuaMod'
[2024-01-09 19:37:27] [Lua] [MyLuaMod] Mod loaded
...
[2024-01-09 19:37:32] [Lua] [MyLuaMod] Key pressed
[2024-01-09 19:37:32] [Lua] [MyLuaMod] Player location: {X=-63.133, Y=4.372, Z=90.000}
[2024-01-09 19:37:39] [Lua] [MyLuaMod] Key pressed
[2024-01-09 19:37:39] [Lua] [MyLuaMod] Player location: {X=788.232, Y=-639.627, Z=90.000}
[2024-01-09 19:37:39] [Lua] [MyLuaMod] Player moved: {delta_X=851.364, delta_Y=-643.999, delta_Z=0.000}
...
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../lua-api/examples.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../guides/using-custom-lua-bindings.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../lua-api/examples.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../guides/using-custom-lua-bindings.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
